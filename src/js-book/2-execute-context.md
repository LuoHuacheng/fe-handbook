---
  category: JS
---

# 执行上下文栈

## 类型

- 全局执行上下文，只有一个
- 函数执行上下文，调用函数自动新建，存在无数个
- eval执行上下文，不建议使用，两次，1-解析，2-执行

## 创建

- 绑定this指定
  - 全局执行上下文，浏览器下this指向window，node环境下this指向文件的module
  - 函数执行上下文，取决于函数的调用方式，分别有默认绑定、隐式绑定、显式绑定、new绑定及箭头函数绑定

- 词法环境创建

- 变量环境创建

## 执行

- 提升(函数优先，变量其次)
  - 变量var声明提升，变量赋值不提升
  - 函数声明提升(同一作用域下多个同名，后声明替换前声明)，函数表达式不提升

- 变量对象
  - 全局上下文，window
  - 函数上下文，arguments

- 函数所有形参属性设为 undefined （函数上下文）、
- 函数声明：变量对象若已存在相同名称的属性，则完全替换此属性
- 变量声明：若变量名称与已声明的形参或函数相同，则不会干扰已存在的属性

> 总结
>
> 1. 全局上下文的变量对象初始化为全局对象
> 2. 函数上下文的变量对象初始化只包括 Arguments 对象
> 3. 在进入执行上下文时会给变量对象添加形参、函数声明、变量声明等初始属性值
> 4. 在代码执行阶段会再次修改变量对象的属性值

## 执行栈(LIFO，后进先出)

- GlobalContext

- OtherContext
